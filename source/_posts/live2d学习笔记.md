---
title: live2d学习笔记
date: 2024/11/28
categories: 
- 美术
tags:
- live2d
---


#### 官方文档

* 手册: [https://docs.live2d.com/zh-CHS/cubism-editor-manual/top/](https://docs.live2d.com/zh-CHS/cubism-editor-manual/top/)
* 关键字: (有忘记的功能就在手册搜关键字查看吧)
  * 辅助线: 其实就是参考线



#### live2d通用参数

![1739103806957](https://s2.loli.net/2025/02/23/yW6Rn5I3CT8t1OS.png)



#### 部件维护

* 若有需求变更, 如原画增加部件或修改部件, 上述的变动图层均要以新图层处理 (copy and write), 然后新psd直接拖live2d进行替换即可, 新图层会被自动置顶, 然后当作新部件进行替换或新增工作



#### 布点(网格)

* 分为`手动布点`和`自动布点`, 点击如图工具进入布点模式

![1739108820722](https://s2.loli.net/2025/02/23/D2dMRyzaAG1VU3Y.png)

* 退出布点模式后, 若拖动网点会带动底下的部件形变, 以下工具可以不同方式拖动网点引起形变

![1739636609042](https://s2.loli.net/2025/02/23/FeHSd2y3ots7kCl.png)



#### 蒙版

* 被蒙版部件在`剪贴ID`填入蒙版部件id即可

![1739108383149](https://s2.loli.net/2025/02/23/ljA2uawCLgoiy37.png)



#### 关键点(关键帧)

* 部件和关键点是`多对多的关系`, 所以调整部件动画状态的时候, 记得要先创建关键点! 
* 如果有自信的可以多选所有所需部件然后创建关键点
* 呼吸参数是唯一一个自循环的参数

![1739109075790](https://s2.loli.net/2025/02/23/vQDRNcpP2yUsCo4.png)





#### 参数速调(偷懒)

* 针对部件`绑反`或者`绑错参数`情况, 提供了解决方法如图红框里的`反转`,`调整` ;
  * 记得先`选中部件`才能进行`反转` `调整` !

![1739104774128](https://s2.loli.net/2025/02/23/g821bDXlCofnLvI.png)

* 复制并反转
  * 对称的部件可以用`动作反转`实现复制并反转, 先选中被复制的参数点位, 然后再点动作反转
  * 对称轴为变形器的中轴

![1739202995590](https://s2.loli.net/2025/02/23/uUnRHsQ8J5X9oK2.png)



#### 软骨骼(路径工具)

* 软骨骼主要用于快速对条形部件进行变形, 因为单个单个网点变形实在太慢了!

* 可以理解为柔性的骨骼(普通骨骼为一段一段的, 软骨骼是条曲线)
* 软骨骼不是变形器, 所以不会出现在左下角的变形器列表中
* 先点选部件再进行软骨骼编辑! 如果要删除整个软骨则选中软骨后点左边`工具细节`栏的删除按钮
* 软骨骼不属于变形器, 所以不会显示到界面左下角的变形器中

![1739108521443](https://s2.loli.net/2025/02/23/DUEgolzpPXhwuZA.png)

* 路径蒙皮(软骨骼蒙皮)
  * 实现: 软骨骼创建好后-->建模-->蒙皮-->变形路径进行蒙皮
  * 本质: 根据路径创建对应的多个骨骼(旋转变形器)并进行蒙皮, 并自动创建好对应的参数; 所以本质就是一个快捷操作, 你可以通过`创建多段骨骼+蒙皮+新建参数+绑定参数`来完成同样的效果
  * 用途: 适合配合物理摆锤快速实现条状部件的物理效果如长发摆动, 丝带飘动, 尾巴翘动 等等
  * 实例: 下图是实现长发物理摆动的例子, 是路径蒙皮+多段物理的经典配合

![1739376710506](https://s2.loli.net/2025/02/23/UOyxFtRoD2d9SiN.png)

![1739377264910](https://s2.loli.net/2025/02/23/9SpskhOvlX8ZeaB.png)



#### 旋转变形器(骨骼)

* 简介: 本质就是骨骼, 基本是用来`控制部件位移和旋转`的, 虽然它也有缩放和透明度的能力, 但一般不用 (而是由弯曲变形器来完成)

* 骨骼快捷编辑: 按住`ctrl`拖动骨骼旋心或尖端实现`平移`和`旋转`; 按住`alt`拖动骨骼尖端实现`骨骼长度拉伸`
* 骨骼最常使用的区块如图的红框所示:

![1739104114716](https://s2.loli.net/2025/02/23/qZpIKWfeRXAgTE7.png)

* 骨骼蒙皮

  * 简介: 骨骼蒙皮不常使用, 它的大部分工作被弯曲变形器取代了
  * 作用: 由于创建骨骼后, 仅仅是`部件与骨骼`关联起来, `部件网格与骨骼`并没有关联起来, 蒙皮就是用来关联
  * 创建: 按住`ctrl`后选择`1个部件及2个以上骨骼`, 然后`建模-蒙皮-蒙皮`
  * 表现: 创建蒙皮后会自动新增对应的蒙皮部件, 它们每个布点产生了权重参数, 即和骨骼产生了关联

  ![1739111043595](https://s2.loli.net/2025/02/23/78iPvqLl2OmtybK.png)



#### 弯曲变形器

* 简介: 用于控制部件的变形, 透明度, 缩放, 工程上不同的部件属性由不同的弯曲变形器独立控制
* 快捷编辑: 按住`ctrl`拖动弯曲变形器实现平移
* 对于对称部件外层的弯曲变形器, 一定要记得保证变形器的对称! (为了方便复制反转)
* 弯曲变形器的常用区块如图所似:

![1739113774564](https://s2.loli.net/2025/02/23/yjhRkfsWY2n8LCm.png)

* 实际工程上旋转变形器和弯曲变形器经常嵌套使用

  ![1739113900197](https://s2.loli.net/2025/02/23/qtBjZLdhckXyv29.png)



#### 物理模拟

* 物理模拟本质也是新增一种A到B的绑定, 但主界面上看不到, 需要进物理模拟界面才能查看和管理该绑定

* 新建: 无需先选中什么, 直接`建模`->`打开物理/场景混合设定`进入物理模拟界面, 然后`追加`一个组

* 物理模拟界面不要误按空格, 会disable掉物理模拟, 若遇到了再按一次空格恢复

* 我们以`头部左右摇摆带动头发摇摆`为例子来展示物理模拟: 

  * 例子会用到的参数如下图所示, 简单讲就是`角度Z`控制头摆, `摇动 前发`单独控制前发摆
  * 期望的工作链路为: `输入参数(角度Z) --> 输出参数(摇动前发) --> 弯曲变形器hairM --> 前发`

![1739202688584](https://s2.loli.net/2025/02/23/EumFUfciJvbBZ1G.png)

![1739201702060](https://s2.loli.net/2025/02/23/daPDEYMhkiQZV9z.png)
* 关于输入
  * 在`输入设定`进行编辑
  * 头部左右摇摆为参数`角度Z` , 所以在输入设定里面, 留一个`角度Z`的输入即可, 如果没有则追加一个`角度Z`的输入, 因为输入参数只有1个, 所以影响度设为100

![1739200621516](https://s2.loli.net/2025/02/23/bKucLhnCmyB6OpX.png)



* 关于输出
  * 在`输出设定`进行编辑
  * 由于是头摇摆来带动头发运动, 我们把输出参数设置为`摇动 前发`
  * 最大输出力控制在150~200为优? 存疑

![1739201205699](https://s2.loli.net/2025/02/23/8Xwg9ntRuOi1rQ4.png)





#### 果冻眼

* 实现原理: `XY双弯曲变形器嵌套`+`2个参数xy`+`2段物理摆锤`(其实1段也能实现但效果稍逊), 这2个弯曲变形器, 1个负责x轴的拉伸收缩且绑在参数x, 1个负责y轴的拉伸收缩且绑在参数y, 他们的嵌套顺序没所谓
* 实例: 如下图

![1739377758741](https://s2.loli.net/2025/02/23/DFXPLbGfyjRq9e4.png)

![1739377919842](https://s2.loli.net/2025/02/23/Rl48QVKUsdDv63k.png)



#### 瞳孔游离(跟踪)

* 用`2个参数XY`+`2个弯曲变形(仅控制位移)`即可实现

![1739804193804](https://s2.loli.net/2025/02/23/5w1qrbJQzeOT43F.png)



#### 九轴头部

* 九轴一般指`角度X`和`角度Y`2个参数分别和各大部件的变形器交织而成 (每个变形器绑好9个状态)

* 如图例子为脸做九轴, 变形器`face_9d`绑在`角度X`和`角度Y`参数上, 在5个状态上做好透视形变调整
  * 5个状态做好后记得`四角形合成`, 在参数栏的右上角菜单里
  * 四角形合成本质是软件帮忙计算其他关键点的状态(4个状态), 所以9轴是`5+4`也是`3x3`
  * 四角形合成后的那4个状态还是需要手动调整, 自动生成的效果一般不大行

![1739808641548](https://s2.loli.net/2025/02/23/QvMrTPiswUYRzXt.png)

* 需做九轴的部件很多, 对应需要很多变形器, 如`脸9d变形器`,`眼睛9d变形器`, `前发9d变形器`,`后发9d变形器`,`鼻子9d变形器`,` 腮红9d变形器`, `嘴巴9d变形器 `等等, `变形器x9`就是九轴的工作总量

![1739809790811](https://s2.loli.net/2025/02/23/qbTZSp3nmaV41Us.png)



#### 按键表情

* 由按键触发而非动捕触发的表情, 其实有点像动画

* 一种特殊表情一般由1个自定义参数控制
* 控制脚本: set_special_pose_param myGirl 'Param123' 0 1 1



#### 口型

* 本质就是做好`3x2`种状态帧, 即`开闭`和`喜平悲`的排列组合6种状态 (变形参也可以自行加关键点例如喜怒平悲)

  ![1739635673658](https://s2.loli.net/2025/02/23/572KV9wcNxuMknm.png)

* `嘴变形`和`嘴张开和闭合`是会进行自动四角合成的, 是属于系统级参数了
* 嘴巴各参数状态参考: (可以仅关注红框的6状态)

![1739802789539](https://s2.loli.net/2025/02/23/1bqfhGT596MuEnO.png)



#### 动画制作

* 动画的一些工作其实可以直接由参数直接实现, 那什么场景适合动画?
  * 无需复原的变化.  参数是变完后须复原, 动画可以实现一去不复返

* 动画和面捕是`互斥`的, 也就是播放动画时, 面捕参数的参数变动是失效的

* 制作步骤: 
  1. 切换到`Animation`模式
  2. 创建新场景(左下角4小图标的第1个) 
  3. 将模型拖入空白场景界面中(模型在左上角的项目那里)
  4. 展开live2d参数, 给需要动的参数打初始帧(00:00处)
  5. 初始帧确认打齐之后, 可以把其他不需要的参数隐藏, 不然参数找死你 (隐藏按钮在参数框内的循环和速度右边的下拉菜单的"隐藏未选择的属性")
  6. 拉到某个时间点, 调整所需live2d参数, 会自动打帧. 如果需要手动打针, 就在时间线中右键选插入关键帧即可
  7. 动画最后最好所有参数都打一个结束帧, 参数和初始帧一样(这步其实可以在第4步一起先做了)
  8. 所有动画做好后, 如果模型带物理, 则要进行物理烘焙: `动画 -> 轨 -> 物理烘焙生成动画`, 此时物理参数会自动生成关键帧, 你可以调整它们但一般没必要
  9. 做好动画, 文件-保存, 格式为`.can3`
  10. 做好动画, 文件-导出运作档, 导出格式为`.motion3.json`, 如果是循环动画, 命名为`IDLE.motion3.json`
  11. 控制脚本: set_special_action_anime 模型名 '动画名' 控制id
* 循环动画
  * 所谓循环动画的概念只是来自面捕软件, 对于Live2d只是一个普通动画
  * 循环动画可以用于一些场景道具, 例如光环循环旋转之类
  * 导出动画文件时, 文件名必须为`IDLE.motion3.json`
  * 为了方便制作循环动画, 绑参数时可以做成循环参数, 如图:

![1739633013356](https://s2.loli.net/2025/02/23/RWFyPcdo1Qtz62A.png)